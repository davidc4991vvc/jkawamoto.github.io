!function(d,c){"function"==typeof define&&define.amd?define(["jquery"],function(a){return c(d,a)}):"object"==typeof exports?c(d,require("jquery")):c(d,d.jQuery||d.Zepto)}(this,function(V,U){function T(j){if(z&&"none"===j.css("animation-name")&&"none"===j.css("-webkit-animation-name")&&"none"===j.css("-moz-animation-name")&&"none"===j.css("-o-animation-name")&&"none"===j.css("-ms-animation-name")){return 0}var i,p,o,n,m=j.css("animation-duration")||j.css("-webkit-animation-duration")||j.css("-moz-animation-duration")||j.css("-o-animation-duration")||j.css("-ms-animation-duration")||"0s",l=j.css("animation-delay")||j.css("-webkit-animation-delay")||j.css("-moz-animation-delay")||j.css("-o-animation-delay")||j.css("-ms-animation-delay")||"0s",k=j.css("animation-iteration-count")||j.css("-webkit-animation-iteration-count")||j.css("-moz-animation-iteration-count")||j.css("-o-animation-iteration-count")||j.css("-ms-animation-iteration-count")||"1";for(m=m.split(", "),l=l.split(", "),k=k.split(", "),n=0,p=m.length,i=Number.NEGATIVE_INFINITY;n<p;n++){o=parseFloat(m[n])*parseInt(k[n],10)+parseFloat(l[n]),o>i&&(i=o)}return i}function S(){if(U(document.body).height()<=U(window).height()){return 0}var b,h,g=document.createElement("div"),f=document.createElement("div");return g.style.visibility="hidden",g.style.width="100px",document.body.appendChild(g),b=g.offsetWidth,g.style.overflow="scroll",f.style.width="100%",g.appendChild(f),h=f.offsetWidth,g.parentNode.removeChild(g),b-h}function R(){if(!y){var b,h,g=U("html"),d=L("is-locked");g.hasClass(d)||(h=U(document.body),b=parseInt(h.css("padding-right"),10)+S(),h.css("padding-right",b+"px"),g.addClass(d))}}function Q(){if(!y){var b,h,g=U("html"),d=L("is-locked");g.hasClass(d)&&(h=U(document.body),b=parseInt(h.css("padding-right"),10)-S(),h.css("padding-right",b+"px"),g.removeClass(d))}}function P(h,g,l,k){var j=L("is",g),i=[L("is",B.CLOSING),L("is",B.OPENING),L("is",B.CLOSED),L("is",B.OPENED)].join(" ");h.$bg.removeClass(i).addClass(j),h.$overlay.removeClass(i).addClass(j),h.$wrapper.removeClass(i).addClass(j),h.$modal.removeClass(i).addClass(j),h.state=g,!l&&h.$modal.trigger({type:g,reason:k},[{reason:k}])}function O(b,l,k){var j=0,i=function(d){d.target===this&&j++},c=function(d){d.target===this&&0===--j&&(U.each(["$bg","$overlay","$wrapper","$modal"],function(f,e){k[e].off(E+" "+D)}),l())};U.each(["$bg","$overlay","$wrapper","$modal"],function(e,d){k[d].on(E,i).on(D,c)}),b(),0===T(k.$bg)&&0===T(k.$overlay)&&0===T(k.$wrapper)&&0===T(k.$modal)&&(U.each(["$bg","$overlay","$wrapper","$modal"],function(e,d){k[d].off(E+" "+D)}),l())}function N(b){b.state!==B.CLOSED&&(U.each(["$bg","$overlay","$wrapper","$modal"],function(a,d){b[d].off(E+" "+D)}),b.$bg.removeClass(b.settings.modifier),b.$overlay.removeClass(b.settings.modifier).hide(),b.$wrapper.hide(),Q(),P(b,B.CLOSED,!0))}function M(h){var g,l,k,j,i={};for(h=h.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,","),g=h.split(","),j=0,l=g.length;j<l;j++){g[j]=g[j].split(":"),k=g[j][1],("string"==typeof k||k instanceof String)&&(k="true"===k||"false"!==k&&k),("string"==typeof k||k instanceof String)&&(k=isNaN(k)?k:+k),i[g[j][0]]=k}return i}function L(){for(var d=F,c=0;c<arguments.length;++c){d+="-"+arguments[c]}return d}function K(){var b,h,g=location.hash.replace("#","");if(g){try{h=U('[data-remodal-id="'+g+'"]')}catch(f){}h&&h.length&&(b=U[G].lookup[h.data(G)],b&&b.settings.hashTracking&&b.open())}else{I&&I.state===B.OPENED&&I.settings.hashTracking&&I.close()}}function J(b,j){var i=U(document.body),h=i,g=this;g.settings=U.extend({},C,j),g.index=U[G].lookup.push(g)-1,g.state=B.CLOSED,g.$overlay=U("."+L("overlay")),null!==g.settings.appendTo&&g.settings.appendTo.length&&(h=U(g.settings.appendTo)),g.$overlay.length||(g.$overlay=U("<div>").addClass(L("overlay")+" "+L("is",B.CLOSED)).hide(),h.append(g.$overlay)),g.$bg=U("."+L("bg")).addClass(L("is",B.CLOSED)),g.$modal=b.addClass(F+" "+L("is-initialized")+" "+g.settings.modifier+" "+L("is",B.CLOSED)).attr("tabindex","-1"),g.$wrapper=U("<div>").addClass(L("wrapper")+" "+g.settings.modifier+" "+L("is",B.CLOSED)).hide().append(g.$modal),h.append(g.$wrapper),g.$wrapper.on("click."+F,'[data-remodal-action="close"]',function(c){c.preventDefault(),g.close()}),g.$wrapper.on("click."+F,'[data-remodal-action="cancel"]',function(c){c.preventDefault(),g.$modal.trigger(A.CANCELLATION),g.settings.closeOnCancel&&g.close(A.CANCELLATION)}),g.$wrapper.on("click."+F,'[data-remodal-action="confirm"]',function(c){c.preventDefault(),g.$modal.trigger(A.CONFIRMATION),g.settings.closeOnConfirm&&g.close(A.CONFIRMATION)}),g.$wrapper.on("click."+F,function(d){var e=U(d.target);e.hasClass(L("wrapper"))&&g.settings.closeOnOutsideClick&&g.close()})}var I,H,G="remodal",F=V.REMODAL_GLOBALS&&V.REMODAL_GLOBALS.NAMESPACE||G,E=U.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(b){return b+"."+F}).join(" "),D=U.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(b){return b+"."+F}).join(" "),C=U.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:"",appendTo:null},V.REMODAL_GLOBALS&&V.REMODAL_GLOBALS.DEFAULTS),B={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},A={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"},z=function(){var b=document.createElement("div").style;return void 0!==b.animationName||void 0!==b.WebkitAnimationName||void 0!==b.MozAnimationName||void 0!==b.msAnimationName||void 0!==b.OAnimationName}(),y=/iPad|iPhone|iPod/.test(navigator.platform);J.prototype.open=function(){var b,d=this;d.state!==B.OPENING&&d.state!==B.CLOSING&&(b=d.$modal.attr("data-remodal-id"),b&&d.settings.hashTracking&&(H=U(window).scrollTop(),location.hash=b),I&&I!==d&&N(I),I=d,R(),d.$bg.addClass(d.settings.modifier),d.$overlay.addClass(d.settings.modifier).show(),d.$wrapper.show().scrollTop(0),d.$modal.focus(),O(function(){P(d,B.OPENING)},function(){P(d,B.OPENED)},d))},J.prototype.close=function(b){var d=this;d.state!==B.OPENING&&d.state!==B.CLOSING&&(d.settings.hashTracking&&d.$modal.attr("data-remodal-id")===location.hash.substr(1)&&(location.hash="",U(window).scrollTop(H)),O(function(){P(d,B.CLOSING,!1,b)},function(){d.$bg.removeClass(d.settings.modifier),d.$overlay.removeClass(d.settings.modifier).hide(),d.$wrapper.hide(),Q(),P(d,B.CLOSED,!1,b)},d))},J.prototype.getState=function(){return this.state},J.prototype.destroy=function(){var b,d=U[G].lookup;N(this),this.$wrapper.remove(),delete d[this.index],b=U.grep(d,function(c){return !!c}).length,0===b&&(this.$overlay.remove(),this.$bg.removeClass(L("is",B.CLOSING)+" "+L("is",B.OPENING)+" "+L("is",B.CLOSED)+" "+L("is",B.OPENED)))},U[G]={lookup:[]},U.fn[G]=function(b){var f,e;return this.each(function(c,a){e=U(a),null==e.data(G)?(f=new J(e,b),e.data(G,f.index),f.settings.hashTracking&&e.attr("data-remodal-id")===location.hash.substr(1)&&f.open()):f=U[G].lookup[e.data(G)]}),f},U(document).ready(function(){U(document).on("click","[data-remodal-target]",function(b){b.preventDefault();var h=b.currentTarget,g=h.getAttribute("data-remodal-target"),f=U('[data-remodal-id="'+g+'"]');U[G].lookup[f.data(G)].open()}),U(document).find("."+F).each(function(b,h){var g=U(h),f=g.data("remodal-options");f?("string"==typeof f||f instanceof String)&&(f=M(f)):f={},g[G](f)}),U(document).on("keydown."+F,function(b){I&&I.settings.closeOnEscape&&I.state===B.OPENED&&27===b.keyCode&&I.close()}),U(window).on("hashchange."+F,K)})});